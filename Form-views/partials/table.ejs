<div class="tbl-class">
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Country</th>
                <th scope="col">Phone</th>
                <th scope="col">Email</th>
            </tr>
        </thead>
        <tbody>
            <h1>Your Contacts____</h1>
            <% for(let contact of contacts){%>
                <tr>
                    <td ><%= contact.Name %> </td>
                    <td><%= contact.Country %> </td>
                    <td><%= contact.Phone %> </td>
                    <td><%= contact.Email %> </td>
                    <td>
                        <button class="editBtn"
                        data-name="<%= contact.Name %>"
                        data-country="<%= contact.Country %>"
                        data-phone="<%= contact.Phone %>"
                        data-email="<%= contact.Email %>"
                        data-id="<%= contact._id %>"
                        >
                            Edit
                        </button>
                        <a  href="/contact/delete/<%= contact._id %>" >Delete</a>
                    </td>
                </tr>
            <%}%>
        </tbody>
    </table>
</div>


<script>
    window.onload = function(){
        let allEditBtn = document.getElementsByClassName("editBtn");
        let FORM = document.querySelector(".form");
        let submitBtn = document.querySelector(".submitBtn");

        [...allEditBtn].forEach(e=>{
            e.addEventListener("click",(elem)=>{
                console.log(elem.target.dataset)
                let {name,country,phone,email,id} = elem.target.dataset;
                FORM[0].value = name
                FORM[1].value = country
                FORM[2].value = phone
                FORM[3].value = email
                FORM[4].value = id
                FORM[5].innerText = "Update"
                

                //simple contion to make button just for one time
                let checkReset = document.querySelector(".reset-btn");
                if(!checkReset){
                    let reset = document.createElement("button");
                    reset.classList.add("reset-btn");reset.innerText = "Reset"
                    reset.type ="reset"
                    submitBtn.appendChild(reset);
                } 
            })
        })

        
    }
    
</script>